<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Custom Challenges</title>
        <link rel="stylesheet" href="/styles.css">
    </head>

    <body>
        <form id="form">
            <input type="text" id="nickname" placeholder="nickname" required />
            <input type="text" id="password" placeholder="password" required />
            <button type="submit">Enter</button>
        </form>

        <div id="verified" style="display: none;">
            <button onclick="challenge()">Challenge</button>
        </div>

        <script src="/socket.io/socket.io.js"></script>
        <script>
            const socket = io();

            document.getElementById('form').addEventListener('submit', (event) => {
                event.preventDefault();

                const nickname = document.getElementById('nickname').value;
                const password = document.getElementById('password').value;
                if (nickname && nickname.trim()) {
                    socket.emit('user', { nickname, password });
                }
            })

            function challenge() {
                let title = window.prompt("Activity title");
                let challenge = window.prompt("Describe the challenge");
                let poster = document.getElementById('nickname').value;
                let opponent = window.prompt("Who are you challenging?");

                socket.emit('challenge', { title, challenge, poster, opponent });
            }

            socket.on('logged-in', () => {
                document.getElementById("form").style.display = "none";
                document.getElementById("verified").style.display = "block";
            })
        </script>
    </body>
</html>